<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>A1 Jobs Vocabulary Quiz (15 c√¢u)</title>
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body { margin: 0; background:#f6f7fb; color:#111; }
    .wrap { max-width: 860px; margin: 0 auto; padding: 18px; }
    .card { background:#fff; border-radius: 14px; padding: 16px; box-shadow: 0 10px 24px rgba(0,0,0,.06); }
    h1 { font-size: 20px; margin: 0 0 8px; }
    .muted { color:#555; font-size: 14px; margin: 0; }
    .row { display:flex; gap:12px; flex-wrap: wrap; align-items:center; margin-top: 12px; }
    .pill { background:#eef1ff; padding: 8px 10px; border-radius: 999px; font-size: 14px; }
    button {
      border:0; border-radius: 12px; padding: 10px 14px;
      background:#2f6fed; color:#fff; font-weight: 600; cursor:pointer;
    }
    button.secondary { background:#e9ecf5; color:#111; }
    button:disabled { opacity:.6; cursor:not-allowed; }
    .q { margin-top: 14px; }
    .qtitle { font-weight:700; margin: 0 0 10px; font-size: 16px; }
    .opts { display:grid; gap:10px; }
    .opt {
      width:100%;
      text-align:left;
      background:#f4f6fb;
      border: 1px solid #e6e8f2;
      padding: 12px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 15px;
    }
    .opt.correct { border-color:#2fb344; background:#eaf8ee; }
    .opt.wrong { border-color:#e03131; background:#ffeff0; }
    .bar { height: 10px; background:#e9ecf5; border-radius: 999px; overflow:hidden; }
    .bar > div { height:100%; width:0%; background:#2f6fed; transition: width .25s ease; }
    .hr { height:1px; background:#eef0f6; margin: 14px 0; }
    .result { font-size: 16px; font-weight: 700; }
    .list { margin: 10px 0 0; padding-left: 18px; }
    .list li { margin: 6px 0; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>A1 English Vocabulary Quiz ‚Äî Jobs (15 c√¢u)</h1>
      <p class="muted">Ch·ªçn ƒë√°p √°n ƒë√∫ng. Xong s·∫Ω hi·ªán ƒëi·ªÉm + c√¢u sai.</p>

      <div class="row">
        <div class="pill">C√¢u: <span id="qIndex">0</span>/<span id="qTotal">0</span></div>
        <div class="pill">ƒêi·ªÉm: <span id="score">0</span></div>
        <div class="pill">Th·ªùi gian: <span id="time">00:00</span></div>
      </div>

      <div class="row" style="justify-content: space-between;">
        <div style="flex:1; min-width: 220px;">
          <div class="bar"><div id="progress"></div></div>
          <div class="muted" id="progressText" style="margin-top:6px;">S·∫µn s√†ng</div>
        </div>
        <div class="row" style="margin-top:0;">
          <button id="startBtn">B·∫Øt ƒë·∫ßu</button>
          <button id="restartBtn" class="secondary" disabled>L√†m l·∫°i</button>
        </div>
      </div>

      <div class="hr"></div>
      <div id="quizArea"><p class="muted">Nh·∫•n <b>B·∫Øt ƒë·∫ßu</b> ƒë·ªÉ l√†m b√†i.</p></div>
    </div>
  </div>

<script>
// =====================
// 1) C√ÇU H·ªéI A1 (15 c√¢u)
// =====================
const QUESTIONS = [
  { q: "A doctor works in a ‚Ä¶", a: ["school","hospital","farm","restaurant"], correct: 1 },
  { q: "A teacher works in a ‚Ä¶", a: ["school","hotel","factory","airport"], correct: 0 },
  { q: "A chef cooks in a ‚Ä¶", a: ["restaurant","bank","library","police station"], correct: 0 },
  { q: "A nurse helps people in a ‚Ä¶", a: ["hospital","cinema","shop","office"], correct: 0 },
  { q: "A driver drives a ‚Ä¶", a: ["bus/taxi","plane","computer","book"], correct: 0 },

  { q: "A farmer works on a ‚Ä¶", a: ["farm","train","museum","studio"], correct: 0 },
  { q: "A police officer works at a ‚Ä¶", a: ["police station","supermarket","classroom","kitchen"], correct: 0 },
  { q: "A pilot flies a ‚Ä¶", a: ["boat","plane","bus","bike"], correct: 1 },
  { q: "A waiter/waitress works in a ‚Ä¶", a: ["restaurant","hospital","garage","lab"], correct: 0 },
  { q: "A mechanic fixes a ‚Ä¶", a: ["car","cake","hair","phone"], correct: 0 },

  { q: "A dentist checks your ‚Ä¶", a: ["teeth","eyes","feet","ears"], correct: 0 },
  { q: "A barber cuts your ‚Ä¶", a: ["hair","paper","meat","grass"], correct: 0 },
  { q: "A cashier works in a ‚Ä¶", a: ["shop","school","airport","park"], correct: 0 },
  { q: "A firefighter puts out ‚Ä¶", a: ["fires","music","money","books"], correct: 0 },
  { q: "A vet helps ‚Ä¶", a: ["animals","cars","buildings","computers"], correct: 0 },
];

// =====================
// 2) LOGIC QUIZ
// =====================
const $ = (id) => document.getElementById(id);

const quizArea = $("quizArea");
const startBtn = $("startBtn");
const restartBtn = $("restartBtn");
const qIndexEl = $("qIndex");
const qTotalEl = $("qTotal");
const scoreEl = $("score");
const timeEl = $("time");
const progressEl = $("progress");
const progressText = $("progressText");

let order = [];
let current = 0;
let score = 0;
let locked = false;
let timer = null;
let seconds = 0;
let wrongReview = [];

qTotalEl.textContent = QUESTIONS.length;

function shuffle(arr) {
  const a = arr.slice();
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}
function formatTime(s) {
  const mm = String(Math.floor(s / 60)).padStart(2, "0");
  const ss = String(s % 60).padStart(2, "0");
  return `${mm}:${ss}`;
}
function updateTop() {
  qIndexEl.textContent = Math.min(current + 1, QUESTIONS.length);
  scoreEl.textContent = score;
  timeEl.textContent = formatTime(seconds);
  const pct = (current / QUESTIONS.length) * 100;
  progressEl.style.width = `${pct}%`;
  progressText.textContent = `Ti·∫øn ƒë·ªô: ${Math.round(pct)}%`;
}
function startTimer() {
  stopTimer();
  seconds = 0;
  timeEl.textContent = "00:00";
  timer = setInterval(() => {
    seconds++;
    timeEl.textContent = formatTime(seconds);
  }, 1000);
}
function stopTimer() {
  if (timer) clearInterval(timer);
  timer = null;
}

function renderQuestion() {
  locked = false;
  updateTop();

  const qObj = QUESTIONS[order[current]];
  quizArea.innerHTML = `
    <div class="q">
      <div class="qtitle">${current + 1}. ${qObj.q}</div>
      <div class="opts">
        ${qObj.a.map((opt, idx) => `<button class="opt" data-idx="${idx}">${opt}</button>`).join("")}
      </div>
    </div>
  `;
  quizArea.querySelectorAll(".opt").forEach(btn => {
    btn.addEventListener("click", () => chooseAnswer(btn, qObj));
  });
}

function chooseAnswer(btn, qObj) {
  if (locked) return;
  locked = true;

  const chosen = Number(btn.dataset.idx);
  const opts = Array.from(quizArea.querySelectorAll(".opt"));

  opts.forEach((b) => {
    const idx = Number(b.dataset.idx);
    if (idx === qObj.correct) b.classList.add("correct");
    if (idx === chosen && chosen !== qObj.correct) b.classList.add("wrong");
    b.disabled = true;
  });

  if (chosen === qObj.correct) {
    score++;
    scoreEl.textContent = score;
  } else {
    wrongReview.push({
      question: qObj.q,
      yourAnswer: qObj.a[chosen],
      correctAnswer: qObj.a[qObj.correct]
    });
  }

  setTimeout(() => {
    current++;
    if (current >= QUESTIONS.length) finishQuiz();
    else renderQuestion();
  }, 900);
}

function finishQuiz() {
  stopTimer();
  progressEl.style.width = "100%";
  progressText.textContent = "Ho√†n th√†nh!";

  const total = QUESTIONS.length;
  const pct = Math.round((score / total) * 100);

  const reviewHTML = wrongReview.length
    ? `<div class="hr"></div>
       <div class="result">C√¢u sai (${wrongReview.length}):</div>
       <ul class="list">
         ${wrongReview.map(x =>
           `<li><b>${escapeHtml(x.question)}</b><br/>
             B·∫°n ch·ªçn: <span style="color:#e03131">${escapeHtml(x.yourAnswer)}</span><br/>
             ƒê√∫ng: <span style="color:#2fb344">${escapeHtml(x.correctAnswer)}</span>
           </li>`
         ).join("")}
       </ul>`
    : `<div class="hr"></div><div class="result">B·∫°n l√†m ƒë√∫ng h·∫øt! üéâ</div>`;

  quizArea.innerHTML = `
    <div class="result">ƒêi·ªÉm: ${score}/${total} (${pct}%)</div>
    <p class="muted">Th·ªùi gian: <b>${formatTime(seconds)}</b></p>
    ${reviewHTML}
  `;

  restartBtn.disabled = false;
  startBtn.disabled = false;
  startBtn.textContent = "L√†m l·∫°i (x√°o c√¢u)";
}

function escapeHtml(str) {
  return String(str)
    .replaceAll("&", "&amp;")
    .replaceAll("<", "&lt;")
    .replaceAll(">", "&gt;")
    .replaceAll('"', "&quot;")
    .replaceAll("'", "&#039;");
}

function startQuiz() {
  order = shuffle([...Array(QUESTIONS.length).keys()]);
  current = 0;
  score = 0;
  wrongReview = [];

  startBtn.disabled = true;
  restartBtn.disabled = true;

  startTimer();
  renderQuestion();

  setTimeout(() => {
    restartBtn.disabled = false;
    startBtn.disabled = false;
    startBtn.textContent = "L√†m l·∫°i (x√°o c√¢u)";
  }, 600);
}

startBtn.addEventListener("click", startQuiz);
restartBtn.addEventListener("click", startQuiz);
</script>
</body>
</html>
